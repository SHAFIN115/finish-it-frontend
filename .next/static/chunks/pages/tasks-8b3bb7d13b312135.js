(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[689],{8446:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tasks",function(){return a(5466)}])},5466:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return o}});var t=a(5893),l=a(7294),i=a(1664),r=a.n(i),c=a(9008),n=a.n(c);function o(){let[e,s]=(0,l.useState)({name:"User",email:""}),[a,i]=(0,l.useState)([]),[c,o]=(0,l.useState)([]),[d,m]=(0,l.useState)({title:"",description:"",priority:"medium",status:"todo"}),[h,x]=(0,l.useState)(!1),[j,u]=(0,l.useState)(!0),[p,f]=(0,l.useState)(null),[N,g]=(0,l.useState)(""),[v,b]=(0,l.useState)("all"),[k,y]=(0,l.useState)("all"),[w,C]=(0,l.useState)("created_desc"),[_,S]=(0,l.useState)("list"),[T,E]=(0,l.useState)(!1);(0,l.useEffect)(()=>{if(!localStorage.getItem("token")){window.location.href="/login";return}F()},[]),(0,l.useEffect)(()=>{L()},[a,N,v,k,w]);let P=()=>localStorage.getItem("token"),D=()=>({"Content-Type":"application/json",Authorization:"Bearer ".concat(P())}),F=async()=>{u(!0);try{let e=await fetch("".concat("http://localhost:5000","/api/tasks"),{method:"GET",headers:D()});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let s=await e.json();console.log("Tasks loaded:",s),s.success&&s.tasks?i(s.tasks):console.error("Failed to load tasks:",s.message)}catch(e){console.error("Error loading tasks:",e),e.message.includes("401")&&(localStorage.removeItem("token"),window.location.href="/login")}finally{u(!1)}},L=()=>{let e=[...a];switch(N.trim()&&(e=e.filter(e=>e.title.toLowerCase().includes(N.toLowerCase())||e.description&&e.description.toLowerCase().includes(N.toLowerCase()))),"all"!==v&&(e=e.filter(e=>e.status===v)),"all"!==k&&(e=e.filter(e=>e.priority===k)),w){case"created_desc":e.sort((e,s)=>new Date(s.created_at)-new Date(e.created_at));break;case"created_asc":e.sort((e,s)=>new Date(e.created_at)-new Date(s.created_at));break;case"title_asc":e.sort((e,s)=>e.title.localeCompare(s.title));break;case"title_desc":e.sort((e,s)=>s.title.localeCompare(e.title));break;case"priority":let s={high:3,medium:2,low:1};e.sort((e,a)=>s[a.priority]-s[e.priority]);break;case"status":let t={todo:3,in_progress:2,completed:1};e.sort((e,s)=>t[s.status]-t[e.status])}o(e)},I=async e=>{if(e.preventDefault(),d.title.trim()){x(!0);try{let e=await fetch("".concat("http://localhost:5000","/api/tasks"),{method:"POST",headers:D(),body:JSON.stringify(d)}),s=await e.json();console.log("Task creation response:",s),s.success?(m({title:"",description:"",priority:"medium",status:"todo"}),E(!1),F()):alert(s.message||"Failed to create task")}catch(e){console.error("Error creating task:",e),alert("Error creating task. Please try again.")}finally{x(!1)}}},A=async(e,s)=>{try{let a=await fetch("".concat("http://localhost:5000","/api/tasks/").concat(e.id),{method:"PUT",headers:D(),body:JSON.stringify({...e,status:s})}),t=await a.json();t.success?F():alert(t.message||"Failed to update task")}catch(e){console.error("Error updating task:",e),alert("Error updating task. Please try again.")}},O=async e=>{if(confirm("Are you sure you want to delete this task?"))try{let s=await fetch("".concat("http://localhost:5000","/api/tasks/").concat(e),{method:"DELETE",headers:D()}),a=await s.json();a.success?F():alert(a.message||"Failed to delete task")}catch(e){console.error("Error deleting task:",e),alert("Error deleting task. Please try again.")}},M=e=>{f({...e})},U=async()=>{if(p.title.trim())try{let e=await fetch("".concat("http://localhost:5000","/api/tasks/").concat(p.id),{method:"PUT",headers:D(),body:JSON.stringify(p)}),s=await e.json();s.success?(f(null),F()):alert(s.message||"Failed to update task")}catch(e){console.error("Error updating task:",e),alert("Error updating task. Please try again.")}},H=e=>{switch(e){case"completed":return{color:"success",icon:"check-circle",text:"Completed"};case"in_progress":return{color:"warning",icon:"clock",text:"In Progress"};case"todo":return{color:"secondary",icon:"circle",text:"To Do"};default:return{color:"secondary",icon:"circle",text:"Unknown"}}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n(),{children:[(0,t.jsx)("title",{children:"Tasks - Finish-It"}),(0,t.jsx)("meta",{name:"description",content:"Manage all your tasks in one place"}),(0,t.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,t.jsx)("link",{href:"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css",rel:"stylesheet"}),(0,t.jsx)("link",{href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css",rel:"stylesheet"}),(0,t.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap",rel:"stylesheet"}),(0,t.jsx)("link",{rel:"stylesheet",href:"/styles/dashboard.css"}),(0,t.jsx)("link",{rel:"stylesheet",href:"/styles/tasks.css"})]}),(0,t.jsxs)("div",{className:"dashboard-wrapper",children:[(0,t.jsxs)("div",{className:"sidebar",children:[(0,t.jsx)("div",{className:"sidebar-header",children:(0,t.jsxs)(r(),{href:"/",className:"brand-logo",children:[(0,t.jsx)("i",{className:"fas fa-rocket me-2"}),"Finish-It"]})}),(0,t.jsxs)("nav",{className:"sidebar-nav",children:[(0,t.jsxs)(r(),{href:"/dashboard",className:"nav-item",children:[(0,t.jsx)("i",{className:"fas fa-home"}),(0,t.jsx)("span",{children:"Dashboard"})]}),(0,t.jsxs)("a",{href:"#",className:"nav-item active",children:[(0,t.jsx)("i",{className:"fas fa-tasks"}),(0,t.jsx)("span",{children:"Tasks"})]}),(0,t.jsxs)("a",{href:"#",className:"nav-item",children:[(0,t.jsx)("i",{className:"fas fa-project-diagram"}),(0,t.jsx)("span",{children:"Projects"})]}),(0,t.jsxs)("a",{href:"#",className:"nav-item",children:[(0,t.jsx)("i",{className:"fas fa-chart-line"}),(0,t.jsx)("span",{children:"Analytics"})]}),(0,t.jsxs)("a",{href:"#",className:"nav-item",children:[(0,t.jsx)("i",{className:"fas fa-calendar"}),(0,t.jsx)("span",{children:"Calendar"})]}),(0,t.jsxs)("a",{href:"#",className:"nav-item",children:[(0,t.jsx)("i",{className:"fas fa-cog"}),(0,t.jsx)("span",{children:"Settings"})]})]}),(0,t.jsx)("div",{className:"sidebar-footer",children:(0,t.jsxs)("button",{onClick:()=>{localStorage.removeItem("token"),window.location.href="/login"},className:"btn btn-outline-light btn-sm w-100",children:[(0,t.jsx)("i",{className:"fas fa-sign-out-alt me-2"}),"Logout"]})})]}),(0,t.jsxs)("div",{className:"main-content",children:[(0,t.jsxs)("header",{className:"tasks-header",children:[(0,t.jsx)("div",{className:"header-left",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"header-title",children:"Tasks"}),(0,t.jsx)("p",{className:"header-subtitle",children:"Manage all your tasks in one place"})]})}),(0,t.jsx)("div",{className:"header-right",children:(0,t.jsxs)("button",{className:"btn btn-primary",onClick:()=>E(!0),children:[(0,t.jsx)("i",{className:"fas fa-plus me-2"}),"New Task"]})})]}),(0,t.jsx)("div",{className:"filters-section",children:(0,t.jsxs)("div",{className:"row g-3 align-items-center",children:[(0,t.jsx)("div",{className:"col-md-4",children:(0,t.jsxs)("div",{className:"search-box",children:[(0,t.jsx)("i",{className:"fas fa-search"}),(0,t.jsx)("input",{type:"text",className:"form-control",placeholder:"Search tasks...",value:N,onChange:e=>g(e.target.value)})]})}),(0,t.jsx)("div",{className:"col-md-2",children:(0,t.jsxs)("select",{className:"form-select",value:v,onChange:e=>b(e.target.value),children:[(0,t.jsx)("option",{value:"all",children:"All Status"}),(0,t.jsx)("option",{value:"todo",children:"To Do"}),(0,t.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,t.jsx)("option",{value:"completed",children:"Completed"})]})}),(0,t.jsx)("div",{className:"col-md-2",children:(0,t.jsxs)("select",{className:"form-select",value:k,onChange:e=>y(e.target.value),children:[(0,t.jsx)("option",{value:"all",children:"All Priority"}),(0,t.jsx)("option",{value:"high",children:"High"}),(0,t.jsx)("option",{value:"medium",children:"Medium"}),(0,t.jsx)("option",{value:"low",children:"Low"})]})}),(0,t.jsx)("div",{className:"col-md-2",children:(0,t.jsxs)("select",{className:"form-select",value:w,onChange:e=>C(e.target.value),children:[(0,t.jsx)("option",{value:"created_desc",children:"Latest First"}),(0,t.jsx)("option",{value:"created_asc",children:"Oldest First"}),(0,t.jsx)("option",{value:"title_asc",children:"Title A-Z"}),(0,t.jsx)("option",{value:"title_desc",children:"Title Z-A"}),(0,t.jsx)("option",{value:"priority",children:"Priority"}),(0,t.jsx)("option",{value:"status",children:"Status"})]})}),(0,t.jsx)("div",{className:"col-md-2",children:(0,t.jsxs)("div",{className:"d-flex gap-2",children:[(0,t.jsx)("button",{className:"btn btn-outline-secondary ".concat("list"===_?"active":""),onClick:()=>S("list"),children:(0,t.jsx)("i",{className:"fas fa-list"})}),(0,t.jsx)("button",{className:"btn btn-outline-secondary ".concat("grid"===_?"active":""),onClick:()=>S("grid"),children:(0,t.jsx)("i",{className:"fas fa-th"})}),(0,t.jsx)("button",{className:"btn btn-outline-secondary",onClick:()=>{g(""),b("all"),y("all"),C("created_desc")},title:"Clear Filters",children:(0,t.jsx)("i",{className:"fas fa-times"})})]})})]})}),(0,t.jsx)("div",{className:"tasks-content",children:j?(0,t.jsxs)("div",{className:"text-center p-5",children:[(0,t.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,t.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,t.jsx)("p",{className:"mt-3",children:"Loading tasks..."})]}):0===c.length?(0,t.jsxs)("div",{className:"empty-state",children:[(0,t.jsx)("i",{className:"fas fa-tasks fa-4x text-muted mb-4"}),(0,t.jsx)("h4",{children:"No tasks found"}),(0,t.jsx)("p",{className:"text-muted",children:0===a.length?"Create your first task to get started!":"Try adjusting your filters or search query."}),0===a.length&&(0,t.jsxs)("button",{className:"btn btn-primary",onClick:()=>E(!0),children:[(0,t.jsx)("i",{className:"fas fa-plus me-2"}),"Create Task"]})]}):(0,t.jsx)("div",{className:"tasks-grid ".concat(_),children:c.map(e=>{let s=H(e.status);return(0,t.jsx)("div",{className:"task-card ".concat(e.status),children:p&&p.id===e.id?(0,t.jsxs)("div",{className:"task-edit-form",children:[(0,t.jsx)("input",{type:"text",className:"form-control mb-3",value:p.title,onChange:e=>f({...p,title:e.target.value})}),(0,t.jsx)("textarea",{className:"form-control mb-3",rows:"3",value:p.description||"",onChange:e=>f({...p,description:e.target.value}),placeholder:"Description..."}),(0,t.jsxs)("div",{className:"row mb-3",children:[(0,t.jsx)("div",{className:"col-6",children:(0,t.jsxs)("select",{className:"form-select",value:p.priority,onChange:e=>f({...p,priority:e.target.value}),children:[(0,t.jsx)("option",{value:"low",children:"Low"}),(0,t.jsx)("option",{value:"medium",children:"Medium"}),(0,t.jsx)("option",{value:"high",children:"High"})]})}),(0,t.jsx)("div",{className:"col-6",children:(0,t.jsxs)("select",{className:"form-select",value:p.status,onChange:e=>f({...p,status:e.target.value}),children:[(0,t.jsx)("option",{value:"todo",children:"To Do"}),(0,t.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,t.jsx)("option",{value:"completed",children:"Completed"})]})})]}),(0,t.jsxs)("div",{className:"d-flex gap-2",children:[(0,t.jsxs)("button",{className:"btn btn-success btn-sm flex-fill",onClick:U,children:[(0,t.jsx)("i",{className:"fas fa-check me-1"}),"Save"]}),(0,t.jsxs)("button",{className:"btn btn-secondary btn-sm flex-fill",onClick:()=>f(null),children:[(0,t.jsx)("i",{className:"fas fa-times me-1"}),"Cancel"]})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"task-header",children:[(0,t.jsx)("div",{className:"task-status",children:(0,t.jsx)("span",{className:"status-indicator ".concat(e.status)})}),(0,t.jsx)("div",{className:"task-actions",children:(0,t.jsxs)("div",{className:"dropdown",children:[(0,t.jsx)("button",{className:"btn btn-sm btn-outline-secondary dropdown-toggle","data-bs-toggle":"dropdown",children:(0,t.jsx)("i",{className:"fas fa-ellipsis-v"})}),(0,t.jsxs)("ul",{className:"dropdown-menu",children:[(0,t.jsx)("li",{children:(0,t.jsxs)("button",{className:"dropdown-item",onClick:()=>A(e,"todo"),children:[(0,t.jsx)("i",{className:"fas fa-circle me-2"}),"To Do"]})}),(0,t.jsx)("li",{children:(0,t.jsxs)("button",{className:"dropdown-item",onClick:()=>A(e,"in_progress"),children:[(0,t.jsx)("i",{className:"fas fa-clock me-2"}),"In Progress"]})}),(0,t.jsx)("li",{children:(0,t.jsxs)("button",{className:"dropdown-item",onClick:()=>A(e,"completed"),children:[(0,t.jsx)("i",{className:"fas fa-check-circle me-2"}),"Completed"]})}),(0,t.jsx)("li",{children:(0,t.jsx)("hr",{className:"dropdown-divider"})}),(0,t.jsx)("li",{children:(0,t.jsxs)("button",{className:"dropdown-item",onClick:()=>M(e),children:[(0,t.jsx)("i",{className:"fas fa-edit me-2"}),"Edit"]})}),(0,t.jsx)("li",{children:(0,t.jsxs)("button",{className:"dropdown-item text-danger",onClick:()=>O(e.id),children:[(0,t.jsx)("i",{className:"fas fa-trash me-2"}),"Delete"]})})]})]})})]}),(0,t.jsxs)("div",{className:"task-content",children:[(0,t.jsx)("h5",{className:"task-title",children:e.title}),e.description&&(0,t.jsx)("p",{className:"task-description",children:e.description})]}),(0,t.jsxs)("div",{className:"task-footer",children:[(0,t.jsxs)("div",{className:"task-meta",children:[(0,t.jsx)("span",{className:"priority-badge priority-".concat(e.priority),children:e.priority.toUpperCase()}),(0,t.jsxs)("span",{className:"badge bg-".concat(s.color),children:[(0,t.jsx)("i",{className:"fas fa-".concat(s.icon," me-1")}),s.text]})]}),e.created_at&&(0,t.jsxs)("div",{className:"task-date",children:[(0,t.jsx)("i",{className:"fas fa-calendar me-1"}),new Date(e.created_at).toLocaleDateString()]})]})]})},e.id)})})})]})]}),T&&(0,t.jsx)("div",{className:"modal fade show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:(0,t.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:(0,t.jsxs)("div",{className:"modal-content",children:[(0,t.jsxs)("div",{className:"modal-header",children:[(0,t.jsxs)("h5",{className:"modal-title",children:[(0,t.jsx)("i",{className:"fas fa-plus me-2"}),"Add New Task"]}),(0,t.jsx)("button",{type:"button",className:"btn-close",onClick:()=>E(!1)})]}),(0,t.jsxs)("form",{onSubmit:I,children:[(0,t.jsxs)("div",{className:"modal-body",children:[(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("label",{className:"form-label",children:"Task Title *"}),(0,t.jsx)("input",{type:"text",className:"form-control",placeholder:"Enter task title",value:d.title,onChange:e=>m({...d,title:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("label",{className:"form-label",children:"Description"}),(0,t.jsx)("textarea",{className:"form-control",placeholder:"Enter task description (optional)",rows:"3",value:d.description,onChange:e=>m({...d,description:e.target.value})})]}),(0,t.jsxs)("div",{className:"row",children:[(0,t.jsxs)("div",{className:"col-6",children:[(0,t.jsx)("label",{className:"form-label",children:"Priority"}),(0,t.jsxs)("select",{className:"form-select",value:d.priority,onChange:e=>m({...d,priority:e.target.value}),children:[(0,t.jsx)("option",{value:"low",children:"Low Priority"}),(0,t.jsx)("option",{value:"medium",children:"Medium Priority"}),(0,t.jsx)("option",{value:"high",children:"High Priority"})]})]}),(0,t.jsxs)("div",{className:"col-6",children:[(0,t.jsx)("label",{className:"form-label",children:"Status"}),(0,t.jsxs)("select",{className:"form-select",value:d.status,onChange:e=>m({...d,status:e.target.value}),children:[(0,t.jsx)("option",{value:"todo",children:"To Do"}),(0,t.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,t.jsx)("option",{value:"completed",children:"Completed"})]})]})]})]}),(0,t.jsxs)("div",{className:"modal-footer",children:[(0,t.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>E(!1),children:"Cancel"}),(0,t.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:h,children:h?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"spinner-border spinner-border-sm me-2"}),"Creating..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("i",{className:"fas fa-plus me-2"}),"Create Task"]})})]})]})]})})}),(0,t.jsx)("script",{src:"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"})]})}}},function(e){e.O(0,[996,888,774,179],function(){return e(e.s=8446)}),_N_E=e.O()}]);